{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst gallery = document.querySelector('.gallery-container');\nconst form = document.querySelector('.form');\nconst input = form.querySelector('.input-search');\nconst loader = document.querySelector('.loader');\n\nconst lightbox = new SimpleLightbox('.gallery-link', {\n  captions: true,\n  captionSelector: 'img',\n  captionDelay: 250,\n  captionPosition: 'bottom',\n  captionsData: 'alt',\n});\n\nform.addEventListener('submit', imageSearch);\n\nfunction imageSearch(e) {\n  e.preventDefault();\n\n  gallery.innerHTML = '';\n  loader.classList.add('show');\n\n  const toast = document.querySelector('.iziToast');\n  if (toast) {\n    iziToast.hide(\n      {\n        transitionOut: 'fadeOutUp',\n      },\n      toast\n    );\n  }\n\n  const searchWord = input.value;\n  input.value = '';\n\n  const searchParams = new URLSearchParams({\n    key: '41767472-d86fe691fef3335ff5b770a4f',\n    q: `${searchWord}`,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n  });\n  const url = `https://pixabay.com/api/?${searchParams}`;\n\n  fetchImages(url)\n    .then(images => {\n      if (images.hits.length) {\n        renderImages(images.hits);\n\n        updateModal();\n      } else {\n        iziToast.show({\n          message: `Sorry, there are no images matching your search query. Please, try again!`,\n          messageColor: '#FAFAFB',\n          messageSize: '16px',\n          messageLineHeight: '24px',\n          color: '#EF4040',\n          progressBarColor: '#B51B1B',\n          position: 'topRight',\n          icon: 'icon-cancel',\n          iconColor: '#FAFAFB',\n        });\n      }\n    })\n    .catch(error => console.log(error))\n    .finally(() => loader.classList.remove('show'));\n}\n\nfunction fetchImages(url) {\n  return fetch(url).then(response => {\n    if (!response.ok) {\n      throw new Error(response.status);\n    }\n\n    return response.json();\n  });\n}\n\nfunction renderImages(images) {\n  const markup = images\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) => {\n        return `\n            <div class=\"gallery-item\">\n                <a href=\"${largeImageURL}\" class=\"gallery-link\">\n                    <img src=\"${webformatURL}\" alt=\"${tags}\" data-source=\"${largeImageURL}\">\n                </a>\n                \n                <ul class=\"gallery-info-container\">\n                    <li class=\"gallery-info\">\n                        <p class=\"gallery-info-name\">Likes</p>\n                        <p class=\"gallery-info-value\">${likes}</p>\n                    </li>\n\n                    <li class=\"gallery-info\">\n                        <p class=\"gallery-info-name\">Views</p>\n                        <p class=\"gallery-info-value\">${views}</p>\n                    </li>\n\n                    <li class=\"gallery-info\">\n                        <p class=\"gallery-info-name\">Comments</p>\n                        <p class=\"gallery-info-value\">${comments}</p>\n                    </li>\n\n                    <li class=\"gallery-info\">\n                        <p class=\"gallery-info-name\">Downloads</p>\n                        <p class=\"gallery-info-value\">${downloads}</p>\n                    </li>\n                </ul>\n            </div>\n      `;\n      }\n    )\n    .join('');\n\n  gallery.insertAdjacentHTML('beforeend', markup);\n}\n\nfunction updateModal() {\n  lightbox.refresh();\n}\n"],"names":["gallery","form","input","loader","lightbox","SimpleLightbox","imageSearch","e","toast","iziToast","searchWord","url","fetchImages","images","renderImages","updateModal","error","response","markup","webformatURL","largeImageURL","tags","likes","views","comments","downloads"],"mappings":"6vBAMA,MAAMA,EAAU,SAAS,cAAc,oBAAoB,EACrDC,EAAO,SAAS,cAAc,OAAO,EACrCC,EAAQD,EAAK,cAAc,eAAe,EAC1CE,EAAS,SAAS,cAAc,SAAS,EAEzCC,EAAW,IAAIC,EAAe,gBAAiB,CACnD,SAAU,GACV,gBAAiB,MACjB,aAAc,IACd,gBAAiB,SACjB,aAAc,KAChB,CAAC,EAEDJ,EAAK,iBAAiB,SAAUK,CAAW,EAE3C,SAASA,EAAYC,EAAG,CACtBA,EAAE,eAAc,EAEhBP,EAAQ,UAAY,GACpBG,EAAO,UAAU,IAAI,MAAM,EAE3B,MAAMK,EAAQ,SAAS,cAAc,WAAW,EAC5CA,GACFC,EAAS,KACP,CACE,cAAe,WAChB,EACDD,CACN,EAGE,MAAME,EAAaR,EAAM,MACzBA,EAAM,MAAQ,GASd,MAAMS,EAAM,4BAPS,IAAI,gBAAgB,CACvC,IAAK,qCACL,EAAG,GAAGD,IACN,WAAY,QACZ,YAAa,aACb,WAAY,EAChB,CAAG,IAGDE,EAAYD,CAAG,EACZ,KAAKE,GAAU,CACVA,EAAO,KAAK,QACdC,EAAaD,EAAO,IAAI,EAExBE,KAEAN,EAAS,KAAK,CACZ,QAAS,4EACT,aAAc,UACd,YAAa,OACb,kBAAmB,OACnB,MAAO,UACP,iBAAkB,UAClB,SAAU,WACV,KAAM,cACN,UAAW,SACrB,CAAS,CAET,CAAK,EACA,MAAMO,GAAS,QAAQ,IAAIA,CAAK,CAAC,EACjC,QAAQ,IAAMb,EAAO,UAAU,OAAO,MAAM,CAAC,CAClD,CAEA,SAASS,EAAYD,EAAK,CACxB,OAAO,MAAMA,CAAG,EAAE,KAAKM,GAAY,CACjC,GAAI,CAACA,EAAS,GACZ,MAAM,IAAI,MAAMA,EAAS,MAAM,EAGjC,OAAOA,EAAS,MACpB,CAAG,CACH,CAEA,SAASH,EAAaD,EAAQ,CAC5B,MAAMK,EAASL,EACZ,IACC,CAAC,CACC,aAAAM,EACA,cAAAC,EACA,KAAAC,EACA,MAAAC,EACA,MAAAC,EACA,SAAAC,EACA,UAAAC,CACR,IACe;AAAA;AAAA,2BAEYL;AAAA,gCACKD,WAAsBE,mBAAsBD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wDAMpBE;AAAA;AAAA;AAAA;AAAA;AAAA,wDAKAC;AAAA;AAAA;AAAA;AAAA;AAAA,wDAKAC;AAAA;AAAA;AAAA;AAAA;AAAA,wDAKAC;AAAA;AAAA;AAAA;AAAA,OAMnD,EACA,KAAK,EAAE,EAEVzB,EAAQ,mBAAmB,YAAakB,CAAM,CAChD,CAEA,SAASH,GAAc,CACrBX,EAAS,QAAO,CAClB"}